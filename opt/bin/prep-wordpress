#! /usr/bin/env bash

set -euo pipefail

if [ $# -ne 1 ]; then
	echo "usage: prep-wordpress path/to/wordpress-XYZ.zip"
	exit 1
fi

echo "Unzipping..."
unzip -q "$1"
echo "Done."

echo "Cleaning..."

rm wordpress/license.txt
rm wordpress/readme.html
rm wordpress/wp-config-sample.php
rm wordpress/wp-content/plugins/hello.php
rm -rf wordpress/wp-content/plugins/akismet
rm -rf wordpress/wp-content/themes/twentysixteen
rm -rf wordpress/wp-content/themes/twentyseventeen

echo "Done."
echo "Ready for sync to arborwx."
echo ""
echo "In Transmit, use modification date, and DO NOT delete orphaned files - that would erase config.php and other important files."
echo "Then, sync wp-admin, allowing deletion of orphans."
